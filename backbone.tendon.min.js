Tendon.AppRouter=function(){"use strict";var a={app:void 0,vent:void 0,methods:["main"],defaultRoute:"main",depth:7};return Backbone.Router.extend({initialize:function(b){_.extend(a,b),a.vent=a.vent||Backbone.Wreqr.EventAggregator,app=this.app=new a.app,app.vent=this.vent=new a.vent,app.router=this},addMethod:function(){a.methods=_.union(a.methods,_.toArray(arguments))},removeMethod:function(){a.methods=_.difference(a.methods,_.toArray(arguments))},routes:function(b){for(var c={"":b},d=0;d<=a.depth;d++){for(var e=[],f=0;d>=f;f++)e.push(":"+f);c[e.join("/")+"*"]=b}return c}("action"),action:function(){var b=Backbone.history.fragment.split("/"),c={};_.each(b,function(a,d){var e=a.split("?"),f=e.length>1?e[1].split("&"):[];b[d]=""==e[0]?void 0:e[0],_.each(f,function(a){var b=a.split("=");c[b[0]]=void 0!==b[1]?b[1]:null})}),b=_.compact(b),b=b.length>0?b:[a.defaultRoute],_.defer(_.bind(function(){app.vent.trigger("route",b,c),this.isMethod(b[0])?app.vent.trigger("route:known",b,c):app.vent.trigger("route:unknown",b,c),app.vent.trigger("route:"+b[0],b,c)},this))},nav:function(a,b){this.navigate(a,{trigger:b||!0})},isMethod:function(b){return void 0===b?!1:_.contains(this.methods,b)||b==a.defaultRoute}})}();var Tendon=function(){return{}}();Tendon.JsonpCollection=function(){"use strict";return Backbone.Collection.extend({sync:function(a,b,c){var d=_.extend({type:"GET",url:this.url(),dataType:"jsonp",processData:!1},c);return $.ajax(d)},parse:function(a){return this.type&&a[this.type]?a[this.type]:a}})}();var Tendon=Tendon||{};Tendon.View=function(){return Backbone.View.extend({initialize:function(a){return this.options=a||{},this.render(this.model&&this.model.attributes?this.model.attributes:{}),_.defer(_.bind(function(){(this.ui||this.options.ui)&&this.setUI(this.ui||this.options.ui),this.onRender&&_.isFunction(this.onRender)&&this.onRender(this.$el)},this)),this},render:function(a){if(void 0!==this.template){var b=_.extend(this.options&&this.options.globals?this.options:{},a);_.isFunction(Template.find(this.template))?this.setElement(Template.render(this.template,b)):_.isFunction(this.template)&&this.setElement(this.template(b))}return this},show:function(){return this.onShow&&_.isFunction(this.onShow)&&_.defer(_.bind(function(){this.onShow(this.$el)},this)),this},close:function(){return this.remove(),this.unbind(),this.onClose&&_.isFunction(this.onClose)&&_.defer(_.bind(function(){this.onClose(this)},this)),this},setUI:function(a){var b=this;return this.ui=function(){var c={};for(var d in a)c[d]=b.$el.find(a[d]);return c}(),this},state:function(a,b){return _.isUndefined(b)||!_.isBoolean(b)?this.$el.hasClass("is-"+a):(b?this.$el.addClass("is-"+a):this.$el.removeClass("is-"+a),this)}})}(),Tendon.Yield=function(){"use strict";var a={};return Tendon.View.extend({tagName:"section",className:"yield",insert:function(){var b=_.toArray(arguments),c=_.last(b);_.isString(b[0])&&b[1]instanceof Backbone.View?(a[b[0]]=b[1],this.$el[c.insertMethod](b[1].el)):b[0]instanceof Backbone.View?(a[b[0].cid]=b[0],this.$el[c.insertMethod](b[0].el)):_.isFunction(b[0])&&b[0].call(this,c)},find:function(){{var b=_.toArray(arguments);_.last(b)}return b[0]instanceof Backbone.View?a[b[0].cid]||!1:a[b[0]]},findAll:function(){return _.map(a,function(a){return a})},replace:function(){{var a=_.toArray(arguments);_.last(a)}},remove:function(){{var a=_.toArray(arguments);_.last(a)}},removeAll:function(){_.each(a,function(a){void 0!==a.close&&a.close()})},"yield":function(a,b){this.closeCurrent(),this.currentView=this[a+"View"]=this[a+"View"]||new b,this.$el.html(this.currentView.el)}})}();